<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ダッシュボード - ATD</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="app-layout">
        <!-- 左サイドバー -->
        <aside class="sidebar">
            <div class="sidebar-nav">
                <a href="{{ url_for('main.dashboard') }}" class="sidebar-item active">
                    <span class="sidebar-icon">🏠</span>
                </a>
                <a href="{{ url_for('tasks.create_task') }}" class="sidebar-item">
                    <span class="sidebar-icon">➕</span>
                </a>
                <a href="{{ url_for('main.profile') }}" class="sidebar-item">
                    <span class="sidebar-icon">👤</span>
                </a>
                <a href="{{ url_for('main.mindmap') }}" class="sidebar-item">
                    <span class="sidebar-icon">💡</span>
                </a>
                <a href="#" class="sidebar-item">
                    <span class="sidebar-icon">⭐</span>
                </a>
                <a href="#" class="sidebar-item">
                    <span class="sidebar-icon">⚙️</span>
                </a>
            </div>
        </aside>

        <!-- メインコンテンツエリア -->
        <div class="main-layout">
            <!-- ナビゲーションバー -->
            <nav class="navbar">
            <div class="navbar-content">
                <div class="navbar-left">
                    <div class="navbar-brand">ATD</div>
                    <div class="navbar-menu">
                        <a href="{{ url_for('main.dashboard') }}" class="navbar-item active">
                            ダッシュボード
                        </a>
                        <a href="{{ url_for('main.personal_tasks') }}" class="navbar-item">
                            タスク管理
                        </a>
                        <a href="{{ url_for('main.team_management') }}" class="navbar-item">
                            チーム管理
                        </a>
                        <a href="{{ url_for('main.mindmap') }}" class="navbar-item">
                            マインドマップ
                        </a>
                        <a href="{{ url_for('main.profile') }}" class="navbar-item">
                            プロフィール
                        </a>
                    </div>
                </div>
                <div class="navbar-right">
                    <div class="user-controls">
                        <a href="#" class="user-control active personal-mode">
                            個人
                        </a>
                        <a href="#" class="user-control team-mode">
                            チーム
                        </a>
                        <a href="{{ url_for('main.profile') }}" class="user-control">
                            {{ current_user.username }}
                        </a>
                    </div>
                    <a href="{{ url_for('tasks.create_task') }}" class="btn btn-primary">+ タスク追加</a>
                </div>
            </div>
            </nav>

            <!-- コンテンツ -->
            <div class="container">
            <div class="page-header">
                <h1>ダッシュボード</h1>
                <div class="date-selector">
                    <select class="form-control">
                        <option>今日</option>
                        <option>今週</option>
                        <option>今月</option>
                    </select>
                </div>
            </div>

            <div class="dashboard-grid">
                <!-- 上段左：個人パフォーマンス -->
                <div class="card performance-card">
                    <div class="card-header">
                        <h3>・個人パフォーマンス</h3>
                    </div>
                    <div class="performance-stats">
                        <div class="stat-item">
                            <div class="stat-value">85%</div>
                            <div class="stat-label">完了率</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">12</div>
                            <div class="stat-label">完了タスク</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">5日</div>
                            <div class="stat-label">連続達成</div>
                        </div>
                    </div>
                </div>

                <!-- 上段右：今日のタスク -->
                <div class="card today-tasks-card">
                    <div class="card-header">
                        <h3>・今日のタスク (0件)</h3>
                    </div>
                    <div class="today-tasks-content">
                        <!-- タスクがここに表示される -->
                    </div>
                </div>

                <!-- 下段左：進捗分析 -->
                <div class="card analysis-card">
                    <div class="card-header">
                        <h3>・進捗分析</h3>
                    </div>
                    <div class="analysis-content">
                        <!-- グラフやチャートがここに表示される -->
                    </div>
                </div>

                <!-- 下段右：時間分析 -->
                <div class="card analysis-card">
                    <div class="card-header">
                        <h3>・時間分析</h3>
                    </div>
                    <div class="analysis-content">
                        <!-- 時間分析のグラフがここに表示される -->
                    </div>
                </div>
            </div>
            </div>
        </div>
    </div>

    <script>
        // 個人/チーム切り替え
        document.querySelectorAll('.user-control').forEach(control => {
            control.addEventListener('click', function(e) {
                e.preventDefault();
                
                // 全てのコントロールからactiveクラスを削除
                document.querySelectorAll('.user-control').forEach(c => c.classList.remove('active'));
                
                // クリックされたコントロールにactiveクラスを追加
                this.classList.add('active');
                
                const mode = this.textContent.trim();
                console.log('切り替え:', mode);
                
                // カラーモードを適用
                if (mode === '個人') {
                    this.classList.add('personal-mode');
                    this.classList.remove('team-mode');
                } else if (mode === 'チーム') {
                    this.classList.add('team-mode');
                    this.classList.remove('personal-mode');
                }
                
                // ここで個人/チームの切り替え処理を実装
            });
        });
    </script>
</body>
</html>
