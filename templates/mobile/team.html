{% extends 'mobile/base.html' %}
{% block head_title %}ãƒãƒ¼ãƒ  - ATD Mobile{% endblock %}
{% set active_tab = 'team' %}

{% block header_profile %}
<div class="mobile-profile-card">
    <div class="mobile-profile-avatar">C</div>
    <div class="mobile-profile-info">
        <div class="mobile-profile-name">ãƒãƒ¼ãƒ ãƒãƒ–</div>
        <div class="mobile-status-input">ãƒãƒ¼ãƒ ã®é€²è¡ŒçŠ¶æ³ã‚’ã™ã°ã‚„ãç¢ºèª</div>
    </div>
</div>
{% endblock %}

{% block content %}
<section class="mobile-section">
    <div class="mobile-section-title">æ‰€å±ãƒãƒ¼ãƒ </div>
    {% if team_overview %}
        {% for team in team_overview %}
        <div class="mobile-card">
            <div class="mobile-card-header">
                <span>{{ team.name }}</span>
                <span class="mobile-badge">{{ team.progress }}%</span>
            </div>
            <div class="mobile-list">
                <div class="mobile-list-item">
                    <div class="mobile-list-icon">ğŸ§‘â€ğŸ¤â€ğŸ§‘</div>
                    <div class="mobile-list-content">
                        <div class="mobile-list-title">ãƒ¡ãƒ³ãƒãƒ¼æ•°</div>
                        <div class="mobile-list-meta">{{ team.members }} å</div>
                    </div>
                </div>
                <div class="mobile-list-item">
                    <div class="mobile-list-icon">ğŸ—‚ï¸</div>
                    <div class="mobile-list-content">
                        <div class="mobile-list-title">ã‚¿ã‚¹ã‚¯</div>
                        <div class="mobile-list-meta">å®Œäº† {{ team.completed_tasks }} / åˆè¨ˆ {{ team.total_tasks }}</div>
                    </div>
                </div>
            </div>
            <div class="mobile-section-actions">
                <a href="{{ url_for('main.team_management', view='desktop') }}" class="mobile-action-chip">è©³ç´°ç®¡ç†</a>
                <a href="{{ url_for('main.team_tasks', view='desktop') }}" class="mobile-action-chip">ã‚¿ã‚¹ã‚¯ä¸€è¦§</a>
                <a href="{{ url_for('main.mobile_team_mindmap') }}" class="mobile-action-chip">ãƒã‚¤ãƒ³ãƒ‰ãƒãƒƒãƒ—ã‚’è¦‹ã‚‹</a>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <div class="mobile-empty">æ‰€å±ã—ã¦ã„ã‚‹ãƒãƒ¼ãƒ ãŒã¾ã ã‚ã‚Šã¾ã›ã‚“</div>
        <div class="mobile-section-actions">
            <a href="{{ url_for('main.team_create', view='desktop') }}" class="mobile-action-chip highlight">ãƒãƒ¼ãƒ ã‚’ä½œæˆ</a>
        </div>
    {% endif %}
</section>

<section class="mobile-section">
    <div class="mobile-section-title">ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªãƒãƒ¼ãƒ ã‚¿ã‚¹ã‚¯</div>
    <div class="mobile-card">
        <div class="mobile-card-header">
            <span>ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªãƒãƒ¼ãƒ ã‚¿ã‚¹ã‚¯</span>
            <a href="{{ url_for('main.team_tasks', view='desktop') }}" class="mobile-link-row">ã™ã¹ã¦è¡¨ç¤º</a>
        </div>
        {% if active_team_tasks %}
            <div class="mobile-list">
                {% for task in active_team_tasks[:5] %}
                <div class="mobile-list-item">
                    <div class="mobile-list-icon">{{ loop.index }}</div>
                    <div class="mobile-list-content">
                        <div class="mobile-list-title">{{ task.title }}</div>
                        <div class="mobile-list-meta">æœŸé™ {{ task.due_date.strftime('%m/%d') if task.due_date }}ãƒ»æ‹…å½“ {{ task.assignee_names }}</div>
                    </div>
                    {% if task.completed %}<span class="mobile-badge">å®Œäº†</span>{% endif %}
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="mobile-empty">æœªå®Œäº†ã®ãƒãƒ¼ãƒ ã‚¿ã‚¹ã‚¯ã¯ã‚ã‚Šã¾ã›ã‚“</div>
        {% endif %}
    </div>
</section>
{% endblock %}

