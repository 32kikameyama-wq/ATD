{% extends 'mobile/base.html' %}
{% block head_title %}ãƒãƒ¼ãƒ ç›®æ¨™ - ATD Mobile{% endblock %}
{% set active_tab = 'team' %}

{% block header_profile %}
<div class="mobile-profile-card">
    <div class="mobile-profile-avatar">ğŸ—ºï¸</div>
    <div class="mobile-profile-info">
        <div class="mobile-profile-name">ãƒãƒ¼ãƒ ãƒã‚¤ãƒ³ãƒ‰ãƒãƒƒãƒ—</div>
        <div class="mobile-status-input">ãƒãƒ¼ãƒ ã”ã¨ã®ç›®æ¨™ã‚«ãƒ¼ãƒ‰ã‚’ä¸€è¦§ã§ãƒã‚§ãƒƒã‚¯</div>
    </div>
</div>
{% endblock %}

{% block content %}
<section class="mobile-section">
    {% if team_mindmaps %}
        {% for entry in team_mindmaps %}
        <div class="mobile-card">
            <div class="mobile-card-header">
                <span>{{ entry.team.name }}</span>
                <a href="{{ url_for('main.team_mindmap', view='desktop') }}" class="mobile-action-chip">ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—è¡¨ç¤º</a>
            </div>
            {% if entry.team.description %}
            <div class="mobile-card-description">{{ entry.team.description }}</div>
            {% endif %}

            {% if entry.mindmaps %}
                <div class="mobile-list">
                    {% for mindmap in entry.mindmaps %}
                    <div class="mobile-list-item">
                        <div class="mobile-list-icon">ğŸ“Œ</div>
                        <div class="mobile-list-content">
                            <div class="mobile-list-title">{{ mindmap.name }}</div>
                            <div class="mobile-list-meta">
                                {% if mindmap.date %}{{ mindmap.date.strftime('%Y/%m/%d') }}ãƒ»{% endif %}
                                ãƒãƒ¼ãƒ‰ {{ mindmap.node_summaries|length }} ä»¶
                            </div>
                            {% if mindmap.description %}
                            <div class="mobile-list-meta">{{ mindmap.description }}</div>
                            {% endif %}
                            {% if mindmap.node_summaries %}
                            <div class="mobile-task-tags">
                                {% for node in mindmap.node_summaries[:4] %}
                                <span class="mobile-badge">{{ node.title }} {{ node.progress }}%</span>
                                {% endfor %}
                                {% if mindmap.node_summaries|length > 4 %}
                                <span class="mobile-badge">+{{ mindmap.node_summaries|length - 4 }}</span>
                                {% endif %}
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="mobile-empty">ã“ã®ãƒãƒ¼ãƒ ã®ãƒã‚¤ãƒ³ãƒ‰ãƒãƒƒãƒ—ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“</div>
            {% endif %}
        </div>
        {% endfor %}
    {% else %}
        <div class="mobile-empty">è¡¨ç¤ºã§ãã‚‹ãƒãƒ¼ãƒ ãƒã‚¤ãƒ³ãƒ‰ãƒãƒƒãƒ—ãŒã‚ã‚Šã¾ã›ã‚“</div>
        <div class="mobile-section-actions">
            <a href="{{ url_for('main.create_team', view='desktop') }}" class="mobile-action-chip highlight">ãƒãƒ¼ãƒ ã‚’ä½œæˆ</a>
        </div>
    {% endif %}
</section>
{% endblock %}

