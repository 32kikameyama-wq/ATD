# 🚂 Railway.app 完全無料デプロイガイド

## ✅ Railway.app の特徴

- **完全無料**（個人利用なら¥0/月）
- **PostgreSQL が無料で使える**
- **データ永続化が保証される**
- **再デプロイ時にデータ保持**
- **スリープなし**
- **自動デプロイ**

## 🚀 デプロイ手順

### Step 1: Railway.app にアクセス

1. https://railway.app にアクセス
2. 「Start a New Project」をクリック
3. 「Deploy from GitHub repo」を選択

### Step 2: GitHub でログイン

1. GitHub アカウントで認証
2. アクセス許可を付与

### Step 3: リポジトリを選択

1. **リポジトリ `ATD` を選択**
2. 「Deploy Now」をクリック

### Step 4: PostgreSQL を追加

1. 「+ New」ボタンをクリック
2. 「Database」を選択
3. 「Add PostgreSQL」をクリック
4. 自動的にデータベースが作成され、接続される

### Step 5: 環境変数を設定（必要な場合）

通常は自動設定されますが、手動で確認：

1. Web Service を選択
2. 「Variables」タブを開く
3. 以下の環境変数が設定されているか確認：
   - `FLASK_APP=app.py`
   - `FLASK_ENV=production`

### Step 6: 完了！

**数分でデプロイ完了！**
- 自動的にデータベースが接続される
- データは永続保存される
- URL が発行される

## 🎉 これで完了

### できること

✅ ユーザー登録してデータが保存される
✅ タスクを作成してデータが保存される
✅ PCをシャットダウンしてもデータが残る
✅ 再デプロイしてもデータが保持される
✅ システム更新時にデータが消えない

### データの永続化

- **PostgreSQL に保存される**
- **Railway.app が管理**
- **自動バックアップ**
- **データ損失なし**

## 📊 費用

**¥0/月（完全無料）**

- Web サービス: 無料
- PostgreSQL: 無料
- 転送量: 500GB/月無料
- 制限なし

## ⚠️ 注意点

1. **クレジットが必要**
   - 新規登録で $5 分のクレジットがもらえる
   - 個人利用なら追加料金なし

2. **クレジットが切れたら**
   - アプリは停止する
   - データは保持される
   - クレジット追加で再開

3. **データは消えない**
   - PostgreSQL のデータは永続保存
   - アプリ停止でもデータ保持

## 🔧 トラブルシューティング

### デプロイが失敗する場合

1. **ログを確認**
   - Railway ダッシュボード → 「View Logs」
   - エラー内容を確認

2. **環境変数を確認**
   - Web Service → 「Variables」
   - 正しく設定されているか確認

3. **データベース接続を確認**
   - PostgreSQL が正しく作成されているか
   - 自動接続されているか確認

### データベースに接続できない場合

1. **環境変数を再確認**
   - `DATABASE_URL` が設定されているか
   - Railway が自動設定しているか確認

2. **PostgreSQL を再作成**
   - 一度削除して再作成
   - 再度接続を確認

## 🎯 次のステップ

1. **デプロイ完了**
2. **URL でアクセス**
3. **ログインして動作確認**
4. **ユーザーを作成**
5. **タスクを作成**
6. **データが保存されることを確認**

## ✅ 完了チェックリスト

- [ ] Railway.app にアカウント作成
- [ ] GitHub でログイン
- [ ] リポジトリを選択
- [ ] デプロイ開始
- [ ] PostgreSQL を追加
- [ ] URL にアクセス
- [ ] ログイン機能を確認
- [ ] ユーザー作成を確認
- [ ] データが保存されることを確認
- [ ] 再デプロイしてデータが保持されることを確認

---

**これで完全無料で本番運用できます！** 🎉

